{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile within the LocalDink application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile."
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "User's phone number for SMS notifications."
        },
        "defaultDoubles": {
          "type": "boolean",
          "description": "Preferred doubles game setting."
        },
        "homeCourtId": {
          "type": "string",
          "description": "Reference to Court. (Relationship: UserProfile 1:N Court, this is the default court)"
        },
        "availability": {
          "type": "string",
          "description": "User's default availability for scheduling."
        },
        "groupdIds": {
          "type": "array",
          "description": "References to Groups. (Relationship: UserProfile N:N Group)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "GameSession": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GameSession",
      "type": "object",
      "description": "Represents a scheduled pickleball game session.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the game session."
        },
        "organizerId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N GameSession, the user who organized this session)"
        },
        "courtId": {
          "type": "string",
          "description": "Reference to Court. (Relationship: Court 1:N GameSession, the court where the session is held)"
        },
        "startTime": {
          "type": "string",
          "description": "Start time of the game session.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "End time of the game session.",
          "format": "date-time"
        },
        "playerIds": {
          "type": "array",
          "description": "References to UserProfile. (Relationship: UserProfile N:N GameSession, the players who are invited to the game session)",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "type": "string",
          "description": "Status of the game session (e.g., scheduled, confirmed, cancelled)."
        },
        "isDoubles": {
          "type": "boolean",
          "description": "Indicates if the game is doubles or singles."
        }
      },
      "required": [
        "id",
        "organizerId",
        "courtId",
        "startTime",
        "endTime",
        "status"
      ]
    },
    "Court": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Court",
      "type": "object",
      "description": "Represents a pickleball court.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the court."
        },
        "name": {
          "type": "string",
          "description": "Name of the court."
        },
        "location": {
          "type": "string",
          "description": "Location of the court."
        },
        "surfaceType": {
          "type": "string",
          "description": "Type of the court surface (e.g., asphalt, clay)."
        },
        "isIndoor": {
          "type": "boolean",
          "description": "Indicates if the court is indoors."
        }
      },
      "required": [
        "id",
        "name",
        "location"
      ]
    },
    "Group": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Group",
      "type": "object",
      "description": "Represents a group of players.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the group."
        },
        "name": {
          "type": "string",
          "description": "Name of the group."
        },
        "description": {
          "type": "string",
          "description": "Description of the group."
        },
        "memberIds": {
          "type": "array",
          "description": "References to UserProfile. (Relationship: UserProfile N:N Group, the members of this group)",
          "items": {
            "type": "string"
          }
        },
        "ownerId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N Group, the user who owns/created this group)"
        }
      },
      "required": [
        "id",
        "name"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profiles. Path-based ownership for private user data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/gameSessions/{gameSessionId}",
        "definition": {
          "entityName": "GameSession",
          "schema": {
            "$ref": "#/backend/entities/GameSession"
          },
          "description": "Stores game sessions. Includes denormalized 'playerIds' array for authorization independence.",
          "params": [
            {
              "name": "gameSessionId",
              "description": "The unique identifier for the game session."
            }
          ]
        }
      },
      {
        "path": "/courts/{courtId}",
        "definition": {
          "entityName": "Court",
          "schema": {
            "$ref": "#/backend/entities/Court"
          },
          "description": "Stores court information.",
          "params": [
            {
              "name": "courtId",
              "description": "The unique identifier for the court."
            }
          ]
        }
      },
      {
        "path": "/groups/{groupId}",
        "definition": {
          "entityName": "Group",
          "schema": {
            "$ref": "#/backend/entities/Group"
          },
          "description": "Stores group information. Includes denormalized 'memberIds' array for authorization independence.",
          "params": [
            {
              "name": "groupId",
              "description": "The unique identifier for the group."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to ensure authorization independence, clarity, and scalability for the LocalDink application. User profiles are stored under `/users/{userId}` for private user data with straightforward path-based ownership. Game sessions are stored under `/gameSessions/{gameSessionId}` with denormalized 'playerIds' and 'organizerId' arrays within each document to facilitate simpler security rules without requiring `get()` calls. Courts and Groups are top-level collections to avoid unnecessary nesting. The `groups` collection contains a denormalized list of `memberIds` to simplify group membership checks in security rules. The structure supports required QAPs by segregating user data and using membership models where needed."
  }
}